{% extends "base.html" %}

{% load share %}

{% block heading %} 
List 

{% endblock heading %}

{% block content %}


	<div class="jumbotron">
		<h1 class="display-3">my posts</h1>
		<a href="{%url 'create' %}"><button class="btn btn-success">create</button></a>

		<form class"form-group" action="{% url 'list' %}" method="GET">
		<input type="text" name="q" placeholder="search..." value="{{request.GET.q}}">
		<input class="btn btn-primary" type="submit" value="search">
	</form>

	</div>

	

	<div class="row">
	{% for item in post_items %}
		<div class=" col-xs-4 col-sm-4 col-md-3 col-lg-3">
			{% if item.img %}
				<img class="card-img-top" src="{{item.img.url}}" alt="card image cap">
				{% endif %}
			<div class="card" style="width: 18rem;">
				<div class="card-body">
					<h4 class="card-title"><a href="{%url 'detail' post_slug=item.slug %}">{{item.title}}</a></h4>
					<small>{{item.publish_date|timesince}}</small>
					{% if item.draft %}
						<span class="text-danger">Draft</span>
					{% endif %}
					{% if item.publish_date > today %}
						<span class="text-success">Future Post</span>
					{% endif %}

					<h6 class="card-subtitle mb-2 text-muted">{{item.slug}}</h6>
					<p class="card-text">{{item.content}}</p>
					<p class="card-text">{{item.author.username}}</p>
					<p class="card-text">{{item.author.get_full_name}}</p>
					<p class="card-text">{{item.author.last_login}}</p>
					<p class="card-text">{{item.author.date_joined}}</p>
					<a href="{%url 'update' post_slug=item.slug %}" class="card-link btn btn-primary">Update</a>
					<a href="{%url 'delete' post_slug=item.slug %}" class="card-link btn btn-warning">delete</a>
				</div>
			</div>
		</div>
	{% endfor %}
	</div>


<div class="pagination">
	<span class="step-links">
		{% if post_items.has_previous %}
			<a href="?page={{ post_items.previous_page_number }}">previous</a>
		{% endif %}

		<span class="current">
			Page {{ post_items.number }} of {{ post_items.paginator.num_pages }}.
		</span>

		{% if post_items.has_next %}
			<a href="?page={{ post_items.next_page_number }}&q={{request.GET.q}}">next</a>
		{% endif %}
	</span>
</div>
{% endblock content %}
